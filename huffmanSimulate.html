<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
		<title>Huffman Code Simulation</title>
		<style>
			canvas{
				border: solid 1px green;
			}
		</style>
	</head>

	<body>
		<form name = "HuffmanForm" id="HuffmanForm" >
			<table>
				<tr>
					<td>
						<table>
							<tr>
								<td><p>任務：依下列字元出現頻率建立 Huffman tree</p></td>
							</tr>		
						</table>
						<hr>
						<table>
							<tr>
								<td><input type = "button"  value = "系統產生頻率" onClick = "systemGenerateFrequency();" id = "generateFrequency" ></td> 
								<td><input type = "button"  value = "自行輸入頻率(確認)" onClick = "selfInputFrequency();" id = "inputFrequency" ></td>
								<td><input type = "button"  value = "全部清除" onClick = "clearFrequency();" id = "clearFreq" ></td> 	
							</tr>
						</table>
						<table border="2">
							<tr>
								<td align="center"><p>字元</p></td>
								<td align="center">A</td>
								<td align="center">B</td>
								<td align="center">C</td>
								<td align="center">D</td>
								<td align="center">E</td>
							</tr>
							<tr>
								<td align="center"><p>頻率</p></td>
								<td><input type=text value="" id = frequency0 size="7"></td>
								<td><input type=text value="" id = frequency1 size="7"></td>
								<td><input type=text value="" id = frequency2 size="7"></td>
								<td><input type=text value="" id = frequency3 size="7"></td>
								<td><input type=text value="" id = frequency4 size="7"></td>	
							</tr>
						</table>
						<p id = "inputCheck"></p>
						<hr>
						<table>
							<tr>
								<td>
									<input type = "button"  value = "逐步執行" onClick = "stepExecute();" id = "stepExe">
								</td>
							</tr>
							<tr>
								<td>
									<input type = "button"  value = "一次做完" onClick = "allExecute();" id = "allExe">
								</td>
								<td>
									<p>速度--></p>
								</td>
								<td>
									<input type="radio" name="speed" value="慢" onClick = "speedChoice();">慢
								</td>
								<td>
									<input type="radio" name="speed" value="中" onClick = "speedChoice();">中
								</td>
								<td>
									<input type="radio" name="speed" value="快" onClick = "speedChoice();">快
								</td>
							</tr>
						</table>
						<table>
							<tr>	
								<td>
									<p id = "current">目前進度:</p>
								</td>
							</tr>
							<tr>	
								<td>
									<textarea name="Content" style="width:500px;height:150px;" id=huffmanCurrent readonly="readonly"></textarea>
								</td>
							</tr>
							<tr>	
								<td>
									<p id = "all">所有過程:</p>
								</td>
							</tr>
							<tr>	
								<td>
									<textarea name="Content" style="width:500px;height:150px;" id=huffmanAll readonly="readonly"></textarea>
								</td>
							</tr>

						</table>																
					</td>
						
					<td>
						<table>
							<tr>
								<td>
									<p>Huffman tree:</p>
								</td>
							</tr>
							<tr>
								<td>
									<canvas id = "huffmanGraph" width = 830 height = 450>Your browser does not support</canvas>
								</td>
							</tr>
							<tr>
								<td>
									<p>編碼結果:</p>
								</td>
							</tr>
							<tr>
								<table border="2">
									<tr>
										<td align="center"><p>字元</p></td>
										<td align="center">A</td>
										<td align="center">B</td>
										<td align="center">C</td>
										<td align="center">D</td>
										<td align="center">E</td>
									</tr>
									<tr>
										<td align="center"><p>code</p></td>
										<td><input type=text value="" id = code1 size="7" readonly="readonly"></td>
										<td><input type=text value="" id = code2 size="7" readonly="readonly"></td>
										<td><input type=text value="" id = code3 size="7" readonly="readonly"></td>
										<td><input type=text value="" id = code4 size="7" readonly="readonly"></td>
										<td><input type=text value="" id = code5 size="7" readonly="readonly"></td>
									</tr>
								</table>
							</tr>
						</table>		
					</td>
				</tr>
			</table>
		</form>

		<script>

			// The function will be invoke, when you open the HTML file
			window.onload = function (){
				clearAll();
			}

			var characterFrequency = new Array(0,0,0,0,0); // record the character frequency
			var compareFrequencyArray = new Array("0","0","0","0","0"); // handle the combine frequency
			var characterCode = new Array("0","0","0","0","0"); // record the character huffman code
			var ifInputFrequency = 0; // 0 is not input frequency, 1 is input frequency.
			var isDecideSpeed = 0;

			var huffmanStep = 0;
			var lowSpeed = 10;
			var medSpeed = 5;
			var highSpeed = 1;

			function systemGenerateFrequency(){
				clearFrequency();

				var temp = "frequency";
				var randomNumber = 0;
				for(var count = 0; count < characterFrequency.length; count++){
					randomNumber = Math.floor(Math.random()*50);
					characterFrequency[count] = randomNumber;
					temp = temp + count;
					document.getElementById(temp).value = randomNumber;
					temp = "frequency";
				}
				ifInputFrequency = 1;
			}

			function clearFrequency(){
				ifInputFrequency = 0;
				var temp = "frequency";
				for(var count = 0; count < characterFrequency.length; count++){
					characterFrequency[count] = 0;
					temp = temp + count;
					document.getElementById(temp).value = 0;
					temp = "frequency";
				}
			}

			function clearAll(){
				clearFrequency();
				for(var count = 0; count < characterFrequency.length; count++){
					compareFrequencyArray[count] = "";
					characterCode[count] = "";
					
				}
				ifInputFrequency = 0;
				isDecideSpeed = 0;
				huffmanStep = 0;
			}

		</script>

	</body>
</html>
